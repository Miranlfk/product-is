<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="Identity-suite-initializer" parallel="false" thread-count="1">
    <parameter name="useDefaultListeners" value="false"/>
    <listeners>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestExecutionListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestManagerListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestReportListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestSuiteListener"/>
        <listener class-name="org.wso2.carbon.automation.engine.testlisteners.TestTransformerListener"/>
        <listener class-name="org.wso2.identity.integration.test.listeners.IdentityTestListener"/>
        <listener class-name="org.wso2.identity.integration.test.base.SMTPServerInitializerListener"/>
    </listeners>

    <test name="is-tests-initialize" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.IdentityServerTestSuitInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.base.TomcatInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.base.LDAPServerInitializerTestCase"/>
        </classes>
    </test>

    <!--Disabling since the WS-Trust functionality is provided as a connector and it does not exist in the product by default.-->
    <!--<test name="is-tests-default-configuration-sts" preserve-order="true" parallel="false" group-by-instances="true">-->
        <!--&lt;!&ndash; Active sts test case needs to run before passive sts test case&ndash;&gt;-->
        <!--<classes>-->
            <!--<class name="org.wso2.identity.integration.test.sts.ActiveSTSTestCase"/>-->
        <!--</classes>-->
    <!--</test>-->

    <!--This test block, is-test-adaptive-authentication, executes adaptive script-related integration tests
        using the default script engine of product-is, which is GraalJS. There is no additional configurations
        or initialize scripts required for the moment. Currently, this test block supports JDK runtimes
        up to version 21.
    -->
    <!--
    ====================================================================================================================
        IMPORTANT : All the tests below this section, should be the ones that requires additional Identity Server
        instance.

        To minimize the number of restarts, at each test, additional instance is started before all the tests in the
        below tag and stopped at the end.
    ====================================================================================================================
    -->

    <!--
    ====================================================================================================================
        IMPORTANT : All the tests below this section, should be the ones that requires configuration changes and
        restarts.

        To minimize the number of restarts, at each test, do the configuration update and restart. Then do the test
        and finally restore the configuration without restarting. The next test will perform the restart with the
        configuration changes required for it.

        If multiple tests can be run with one configuration change, group them into a test group and do the above at
        @BeforeTest, and @AfterTest. See 'is-tests-jdbc-userstore' for example.
    ====================================================================================================================
    -->
    <test name="is-tests-jdbc-userstore" preserve-order="true" parallel="false" group-by-instances="true">
        <classes>
            <class name="org.wso2.identity.integration.test.base.JDBCUserStoreInitializerTestCase"/>
            <class name="org.wso2.identity.integration.test.user.mgt.JDBCUserStoreManagerTestCase"/>
        </classes>
    </test>
</suite>
